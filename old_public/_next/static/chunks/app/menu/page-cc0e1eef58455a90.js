(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{14503:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var s=t(12115);let i=0,n=new Map,l=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},r=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],c={toasts:[]};function d(e){c=r(c,e),o.forEach(e=>{e(c)})}function m(e){let{...a}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=s.useState(c);return s.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},50215:(e,a,t)=>{"use strict";t.d(a,{$:()=>o});var s=t(49509);let i=new Set(["cod","paypal","stripe","authorizenetaim","google_pay","apple_pay","square"]),n=new Set(["google_pay","apple_pay","cod","paypal","stripe","authorizenetaim","square"]),l=(s.env.NEXT_PUBLIC_STATIC_ORIGIN||"").replace(/\/+$/,"");function r(e){return l?"".concat(l).concat(e):e}function o(e){let a=(e||"").trim();if(!i.has(a))return r("/images/payments/default.svg");let t=n.has(a)?"png":"svg";return r("/images/payments/".concat(a,".").concat(t))}},68367:(e,a,t)=>{Promise.resolve().then(t.bind(t,93102))},82714:(e,a,t)=>{"use strict";t.d(a,{J:()=>c});var s=t(95155),i=t(12115),n=t(40968),l=t(74466),r=t(53999);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(n.b,{ref:a,className:(0,r.cn)(o(),t),...i})});c.displayName=n.b.displayName},89852:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var s=t(95155),i=t(12115),n=t(53999);let l=i.forwardRef((e,a)=>{let{className:t,type:i,...l}=e;return(0,s.jsx)("input",{type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},93102:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eu});var s=t(95155),i=t(11518),n=t.n(i),l=t(12115);function r(e,a){var t,s;let i="number"==typeof e?e:0,n=null!==(t=null==a?void 0:a.currency)&&void 0!==t?t:"EUR",l=null!==(s=null==a?void 0:a.locale)&&void 0!==s?s:"en-IE";try{return new Intl.NumberFormat(l,{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}catch(e){return"€".concat(i.toFixed(2))}}var o=t(72226),c=t(21802),d=t(78525),m=t(24446),u=t(28611),x=t(91725),p=t(89335),h=t(43463),g=t(60760),y=t(87712),f=t(84616),b=t(62525),j=t(97168),v=t(33651),N=t(74466),w=t(54416),k=t(53999);let S=v.bL;v.l9,v.bm;let C=v.ZL,P=l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(v.hJ,{className:(0,k.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:a})});P.displayName=v.hJ.displayName;let A=(0,N.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_=l.forwardRef((e,a)=>{let{side:t="right",className:i,children:n,...l}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(P,{}),(0,s.jsxs)(v.UC,{ref:a,className:(0,k.cn)(A({side:t}),i),...l,children:[n,(0,s.jsxs)(v.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(w.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=v.UC.displayName;let E=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,k.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};E.displayName="SheetHeader";let T=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,k.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};T.displayName="SheetFooter";let F=l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(v.hE,{ref:a,className:(0,k.cn)("text-lg font-semibold text-foreground",t),...i})});F.displayName=v.hE.displayName,l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(v.VY,{ref:a,className:(0,k.cn)("text-sm text-muted-foreground",t),...i})}).displayName=v.VY.displayName;var O=t(14503),z=t(35695);function I(){let{toast:e}=(0,O.dj)(),{t:a}=(0,c.n)(),t=(0,z.useRouter)(),{items:i,isCartOpen:n,toggleCart:l,updateQuantity:o,removeFromCart:d}=(0,m.x)(),u=i.reduce((e,a)=>e+a.item.price*a.quantity,0);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S,{open:n,onOpenChange:l,children:(0,s.jsxs)(_,{className:"w-full max-w-md flex flex-col surface p-0",children:[(0,s.jsx)(E,{className:"p-4 pb-2 surface-sub divider",children:(0,s.jsx)(F,{className:"font-serif text-3xl",children:a("yourOrder")})}),(0,s.jsx)(h.P.div,{className:"flex-grow overflow-y-auto p-4 space-y-2",layout:!0,transition:{type:"spring",stiffness:300,damping:30},children:0===i.length?(0,s.jsxs)("div",{className:"text-center muted pt-8 space-y-2",children:[(0,s.jsx)("p",{className:"text-lg",children:a("cartEmpty")}),(0,s.jsx)("p",{className:"text-sm",children:a("addItemsFromMenu")})]}):(0,s.jsx)(g.N,{mode:"popLayout",children:i.map(e=>{let{item:t,quantity:i}=e,n=a(t.nameKey)||t.name;return(0,s.jsxs)(h.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50,transition:{duration:.2}},className:"flex items-center space-x-3 p-3 surface-sub rounded-2xl",children:[(0,s.jsx)("div",{className:"relative w-14 h-14 flex-shrink-0",children:(0,s.jsx)(p.p,{src:t.image||"/placeholder.svg",alt:n,fill:!0,className:"object-contain rounded-xl"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h4",{className:"font-semibold",children:n}),(0,s.jsx)("p",{className:"text-sm font-medium",style:{color:"var(--theme-secondary)"},children:r(t.price)}),(0,s.jsxs)("div",{className:"inline-flex items-center mt-1 surface-sub rounded-full p-1 gap-2 w-auto",children:[(0,s.jsx)(j.$,{size:"icon",variant:"ghost",className:"h-7 w-7 rounded-full icon-btn",onClick:()=>o(t.id,i-1),children:(0,s.jsx)(y.A,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"w-6 text-center font-semibold text-sm",children:i}),(0,s.jsx)(j.$,{size:"icon",variant:"ghost",className:"h-7 w-7 rounded-full icon-btn",onClick:()=>o(t.id,i+1),children:(0,s.jsx)(f.A,{className:"h-3 w-3"})})]})]}),(0,s.jsx)(j.$,{size:"icon",variant:"ghost",className:"text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full h-7 w-7",onClick:()=>d(t.id),children:(0,s.jsx)(b.A,{className:"h-3 w-3"})})]},t.id)})})}),i.length>0&&(0,s.jsx)(T,{className:"p-4 surface-sub divider mt-auto",children:(0,s.jsxs)("div",{className:"w-full space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between font-bold text-2xl",children:[(0,s.jsx)("span",{children:a("total")}),(0,s.jsx)("span",{children:r(u)})]}),(0,s.jsx)(j.$,{className:"w-full font-bold text-lg py-4 rounded-2xl shadow-lg transition-all duration-300 hover:shadow-xl",style:{background:"var(--theme-button)",color:"var(--theme-background)"},onClick:()=>{if(0===i.length){e({title:a("cartEmpty"),description:a("addItemsFromMenu"),variant:"destructive"});return}l(),t.push("/checkout")},children:a("proceedToPayment")})]})})]})})})}function q(e){let{categories:a,selectedCategory:t,onSelectCategory:i}=e,{t:n}=(0,c.n)(),r=(0,l.useRef)(null),[o,d]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),x=e=>e,p=()=>{if(!r.current)return;let{scrollLeft:e,scrollWidth:a,clientWidth:t}=r.current;d(e>0),u(e<a-t-1)},g=()=>{p()};return(0,l.useEffect)(()=>{p();let e=r.current;if(e)return e.addEventListener("scroll",g),()=>e.removeEventListener("scroll",g)},[a]),(0,s.jsx)("div",{className:"relative w-full mb-8",children:(0,s.jsx)("div",{ref:r,className:(0,k.cn)("w-full overflow-x-auto scroll-smooth pb-2 no-scrollbar",o&&"mask-gradient-left",m&&"mask-gradient-right"),style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:(0,s.jsx)("div",{className:"flex space-x-3 px-4 min-w-max",children:a.map(e=>(0,s.jsxs)("button",{onClick:()=>i(e),className:(0,k.cn)("relative whitespace-nowrap rounded-2xl px-5 py-3 text-sm font-semibold transition-all duration-300 category-tab",t===e?"is-active":"text-gray-500 hover:text-theme"),children:[t===e&&(0,s.jsx)(h.P.div,{layoutId:"category-underline",className:"absolute bottom-0 left-1/4 right-1/4 h-0.5 rounded-full",style:{backgroundColor:"var(--theme-category-active)"},transition:{type:"spring",stiffness:300,damping:30}}),(0,s.jsx)("span",{className:"relative z-10",children:x(e)})]},e))})})})}var D=t(55607),M=t(48279);function $(e){let{item:a,onClose:t}=e,{t:i}=(0,c.n)(),n=a?i(a.nameKey)||a.name:"",l=a?i(a.descriptionKey)||a.description:"";return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:(0,s.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"relative surface rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(j.$,{variant:"ghost",size:"icon",onClick:t,className:"absolute top-4 right-4 z-10 bg-white/80 hover:bg-white/90 rounded-full shadow-lg border border-white/20",children:(0,s.jsx)(w.A,{className:"h-5 w-5 text-gray-600"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"relative w-28 h-28 mx-auto mb-6",children:(0,s.jsx)(p.p,{src:a.image||"/placeholder.svg",alt:n,fill:!0,className:"object-cover rounded-2xl",style:{objectPosition:"center"}})}),(0,s.jsx)("h2",{className:"font-serif text-3xl font-bold text-paydine-elegant-gray mb-3 text-center",children:n}),(0,s.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed mb-6 text-center",children:l}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-paydine-rose-beige/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-paydine-rose-beige/20",children:[(0,s.jsx)(D.A,{className:"mx-auto h-6 w-6 text-paydine-rose-beige mb-2"}),(0,s.jsxs)("div",{className:"font-bold text-paydine-elegant-gray",children:[a.calories," kcal"]}),(0,s.jsx)("div",{className:"text-xs text-paydine-elegant-gray/70 mt-1",children:i("calories")})]}),(0,s.jsxs)("div",{className:"bg-paydine-rose-beige/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-paydine-rose-beige/20",children:[(0,s.jsx)(M.A,{className:"mx-auto h-6 w-6 text-paydine-rose-beige mb-2"}),(0,s.jsx)("div",{className:"font-bold text-paydine-elegant-gray",children:a.allergens.length>0?a.allergens.join(", "):i("none")}),(0,s.jsx)("div",{className:"text-xs text-paydine-elegant-gray/70 mt-1",children:i("allergens")})]})]})]})]})})})}var L=t(89852),R=t(82714),K=t(66474),H=t(35169),V=t(81586),W=t(39785),U=t(32919),B=t(17580),J=t(5196),Y=t(47863),G=t(33692),X=t(52631),Z=t(27809),Q=t(40646),ee=t(99474),ea=t(30098),et=t(50215),es=t(52596);function ei(e){let a,{cartItem:t,addToCart:i,t:n,onOptionsChange:o}=e,[c,d]=(0,l.useState)(!1),[m,u]=(0,l.useState)({}),x=t.item.options||[],p=(e,a)=>{let s={...m,[e]:a};u(s),o&&o(t.item.id,s)};return(0,s.jsxs)("div",{className:"border border-paydine-champagne/20 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2",children:[(0,s.jsxs)("span",{className:"text-paydine-elegant-gray min-w-[120px]",children:[t.quantity,"x ",t.item.nameKey?n(t.item.nameKey):t.item.name]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),i(t.item,-1)},className:"quantity-btn w-5 h-5 flex items-center justify-center transition-colors",children:(0,s.jsx)(y.A,{className:"w-3 h-3",style:{color:"var(--theme-background)"}})}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray font-semibold min-w-[48px] text-center",children:r((a=(t.item.price||0)*t.quantity,Object.values(m).forEach(e=>{x.forEach(s=>{let i=s.values.find(a=>a.id.toString()===e);i&&(a+=i.price*t.quantity)})}),a))}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),i(t.item,1)},className:"quantity-btn w-5 h-5 flex items-center justify-center transition-colors",children:(0,s.jsx)(f.A,{className:"w-3 h-3",style:{color:"var(--theme-background)"}})})]})]}),x.length>0&&(0,s.jsxs)("div",{className:"border-t border-paydine-champagne/10",children:[(0,s.jsxs)("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between p-2 text-xs text-paydine-elegant-gray hover:bg-paydine-champagne/5 transition-colors",children:[(0,s.jsx)("span",{children:"Customize Options"}),(0,s.jsx)(K.A,{className:"w-3 h-3 transition-transform duration-200 ".concat(c?"rotate-180":"")})]}),c&&(0,s.jsx)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"p-2 space-y-3 bg-paydine-rose-beige/5",children:x.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-xs font-medium text-paydine-elegant-gray mb-1",children:[e.name," ",e.required&&"*"]}),(0,s.jsx)("div",{className:"space-y-1",children:e.values.map(a=>(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs cursor-pointer",children:[(0,s.jsx)("input",{type:"radio"===e.display_type?"radio":"checkbox",name:"".concat(e.name,"-").concat(t.item.id),value:a.id.toString(),checked:m[e.name]===a.id.toString(),onChange:()=>{if("radio"===e.display_type)p(e.name,a.id.toString());else{let t=m[e.name];p(e.name,t===a.id.toString()?"":a.id.toString())}},className:"w-3 h-3 text-paydine-champagne"}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray",children:a.value}),a.price>0&&(0,s.jsxs)("span",{className:"text-paydine-champagne font-medium",children:["+",r(a.price)]})]},a.id))})]},e.id))})})]})]})}function en(e){let{isOpen:a,onClose:t,items:i,tableInfo:n}=e,o=(0,z.useRouter)(),{toast:u}=(0,O.dj)(),{t:x}=(0,c.n)(),{paymentOptions:p,tipSettings:y}=(0,d.W)(),{clearCart:f,addToCart:b}=(0,m.x)(),[v,N]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1),[C,P]=(0,l.useState)({}),[A,_]=(0,l.useState)({}),[E,T]=(0,l.useState)(y.defaultPercentage),[F,I]=(0,l.useState)(""),[q,D]=(0,l.useState)(null),[M,$]=(0,l.useState)([]),[K,Y]=(0,l.useState)(!0),[G,X]=(0,l.useState)({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",email:"",phone:""}),Z=(e,a)=>{_(t=>({...t,[e]:a}))},Q=i.flatMap((e,a)=>Array.from({length:e.quantity}).map((t,s)=>({cartIndex:a,item:e.item,price:e.item.price||0,key:"".concat(e.item.id,"-").concat(a,"-").concat(s),quantity:1}))),ee=w?Object.values(C):i.map(e=>({item:e.item,price:e.item.price||0,quantity:e.quantity})),en=(0,l.useMemo)(()=>ee.reduce((e,a)=>{let t=a.price*(a.quantity||1),s=A[a.item.id]||{};if(Object.keys(s).length>0){let e=i.find(e=>e.item.id===a.item.id);e&&e.item.options&&Object.values(s).forEach(s=>{e.item.options.forEach(e=>{let i=e.values.find(e=>e.id.toString()===s);i&&(t+=i.price*(a.quantity||1))})})}return e+t},0),[ee,A,i]),el=.1*en,er=F?Number.parseFloat(F)||0:E/100*en,eo=en+el+er,ec=async()=>{N(!0);try{let e=(null==n?void 0:n.is_codier)||!1,a={table_id:e?null:(null==n?void 0:n.table_id)||"7",table_name:e?null:(null==n?void 0:n.table_name)||"Table 7",location_id:(null==n?void 0:n.location_id)||1,is_codier:e,items:ee.map(e=>({menu_id:e.item.id,name:e.item.name,quantity:e.quantity||1,price:e.price,special_instructions:"",options:A[e.item.id]||{}})),customer_name:G.cardholderName||(e?"Cashier Customer":"".concat((null==n?void 0:n.table_name)||"Table ".concat((null==n?void 0:n.table_id)||"Unknown")," Customer")),customer_phone:G.phone||"",customer_email:G.email||"",payment_method:"cod"===q?"cod":"paypal"===q?"paypal":"card",total_amount:eo,tip_amount:er,special_instructions:""},t=await ea.u.submitOrder(a);if(t.success)N(!1),u({title:x("paymentSuccessful"),description:"Order #".concat(t.order_id," submitted successfully!")}),t.order_id&&localStorage.setItem("lastOrderId",t.order_id.toString()),setTimeout(()=>{f(),o.push("/order-placed?order_id=".concat(t.order_id||"unknown"))},500);else throw Error("Order submission failed")}catch(e){N(!1),console.error("Order submission error:",e),u({title:"Order Failed",description:e instanceof Error?e.message:"Failed to submit order. Please try again.",variant:"destructive"})}},ed=e=>{P(a=>{let t={...a};return t[e.key]?delete t[e.key]:t[e.key]=e,t})},em=e=>{D(e)},eu=()=>{D(null)},ex=(e,a)=>{X(t=>({...t,[e]:a}))},ep=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),t=a.match(/\d{4,16}/g),s=t&&t[0]||"",i=[];for(let e=0,a=s.length;e<a;e+=4)i.push(s.substring(e,e+4));return i.length?i.join(" "):a},eh=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return a.length>=2?a.substring(0,2)+" / "+a.substring(2,4):a};(0,l.useEffect)(()=>{new ea.O().getPaymentMethods().then($).finally(()=>Y(!1))},[]);let eg=M.find(e=>e.code===q);return a?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md surface rounded-3xl shadow-xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-4 pb-2 surface-sub flex justify-between items-center",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-500 -ml-2",children:(0,s.jsx)(H.A,{className:"h-5 w-5"})}),(0,s.jsx)("h2",{className:"text-lg",children:x("yourOrder")}),(0,s.jsx)("div",{className:"w-8"})," "]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 surface-sub rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(B.A,{className:"h-4 w-4",style:{color:"var(--theme-secondary)"}}),(0,s.jsx)("span",{className:"text-xs muted",children:x("splitBill")})]}),(0,s.jsx)(j.$,{variant:w?"default":"outline",size:"sm",onClick:()=>S(!w),className:(0,es.$)("text-xs",w?"icon-btn--accent":"icon-btn"),children:w?"ON":"OFF"})]}),w?(0,s.jsxs)("div",{className:"surface-sub rounded-2xl p-3 overflow-hidden",children:[(0,s.jsx)("h3",{className:"mb-2 text-xs",children:x("selectItemsToPay")}),(0,s.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Q.map(e=>{var a;return(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2 rounded-lg cursor-pointer hover:opacity-90",onClick:()=>ed(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,k.cn)("w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all",C[e.key]?"icon-btn--accent":"icon-btn"),children:C[e.key]&&(0,s.jsx)(J.A,{className:"w-3 h-3"})}),(0,s.jsx)("span",{children:e.item.nameKey?x(e.item.nameKey):e.item.name})]}),(0,s.jsx)("span",{className:"font-semibold",children:r(null!==(a=e.price)&&void 0!==a?a:0)})]},e.key)})})]}):(0,s.jsxs)("div",{className:"surface-sub rounded-2xl p-3",children:[(0,s.jsx)("h3",{className:"mb-2 text-xs",children:x("orderSummary")}),(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.map(e=>(0,s.jsx)(ei,{cartItem:e,addToCart:b,t:x,onOptionsChange:Z},e.item.id))})]}),y.enabled&&(0,s.jsxs)("div",{className:"surface-sub rounded-2xl p-3",children:[(0,s.jsx)("h3",{className:"mb-2 text-xs",children:x("addTip")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[y.percentages.map(e=>(0,s.jsxs)(j.$,{variant:E!==e||F?"outline":"default",size:"sm",onClick:()=>{T(e),I("")},className:(0,es.$)("text-xs",E!==e||F?"tip-pill":"tip-pill--active"),children:[e,"%"]},e)),(0,s.jsxs)("div",{className:"relative flex-grow",children:[(0,s.jsx)(L.p,{type:"number",placeholder:x("custom"),value:F,onChange:e=>{I(e.target.value),T(0)},className:"pl-6 text-xs h-8",style:{borderColor:"var(--theme-border)"}}),(0,s.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 muted text-xs",children:"$"})]})]})]}),(0,s.jsxs)("div",{className:"surface-sub rounded-2xl p-3 space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{children:x("subtotal")}),(0,s.jsx)("span",{className:"font-semibold",children:r(en)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{children:x("service")}),(0,s.jsx)("span",{className:"font-semibold",children:r(el)})]}),er>0&&(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{children:x("tip")}),(0,s.jsx)("span",{className:"font-semibold",children:r(er)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center divider pt-2 mt-2",children:[(0,s.jsx)("span",{className:"text-base",children:x("total")}),(0,s.jsx)("span",{className:"text-base font-bold",children:r(eo)})]})]}),(0,s.jsx)(g.N,{mode:"wait",children:q?(0,s.jsx)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pt-2 max-h-[300px] overflow-y-auto",children:(()=>{if(!eg)return null;switch(eg.code){case"stripe":case"authorizenetaim":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:eu,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("img",{src:(0,et.$)(eg.code),alt:eg.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:eg.name})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cardNumber",className:"text-sm font-medium text-paydine-elegant-gray",children:"Card Number"}),(0,s.jsx)(L.p,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:G.cardNumber,onChange:e=>ex("cardNumber",ep(e.target.value)),maxLength:19,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"expiryDate",className:"text-sm font-medium text-paydine-elegant-gray",children:"Expiry Date"}),(0,s.jsx)(L.p,{id:"expiryDate",type:"text",placeholder:"MM / YY",value:G.expiryDate,onChange:e=>ex("expiryDate",eh(e.target.value)),maxLength:7,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cvv",className:"text-sm font-medium text-paydine-elegant-gray",children:"CVV"}),(0,s.jsx)(L.p,{id:"cvv",type:"text",placeholder:"123",value:G.cvv,onChange:e=>ex("cvv",e.target.value.replace(/\D/g,"")),maxLength:4,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cardholderName",className:"text-sm font-medium text-paydine-elegant-gray",children:"Cardholder Name"}),(0,s.jsx)(L.p,{id:"cardholderName",type:"text",placeholder:"John Doe",value:G.cardholderName,onChange:e=>ex("cardholderName",e.target.value),className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]})]});case"paypal":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:eu,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("img",{src:(0,et.$)(eg.code),alt:eg.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:eg.name})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"paypalEmail",className:"text-sm font-medium text-paydine-elegant-gray",children:"PayPal Email"}),(0,s.jsx)(L.p,{id:"paypalEmail",type:"email",placeholder:"your.email@example.com",value:G.email,onChange:e=>ex("email",e.target.value),className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})})]});case"apple_pay":case"google_pay":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:eu,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("img",{src:(0,et.$)(eg.code),alt:eg.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:eg.name})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(V.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"apple_pay"===eg.code?"Apple Pay will use your default payment method and shipping address.":"Google Pay will use your default payment method and shipping address."}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: ",r(eo)]})]})})]});case"cod":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:eu,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(W.A,{className:"h-6 w-6 text-paydine-champagne"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:"Cash Payment"})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(W.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Please have the exact amount ready when the waiter comes to collect payment."}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: ",r(eo)]})]})})]});default:return null}})()},"payment-form"):(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2",children:[(0,s.jsx)("h3",{className:"text-center text-sm",children:x("paymentMethods")}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-3 flex-wrap",children:K?(0,s.jsx)("div",{className:"text-sm muted",children:"Loading payment methods..."}):0===M.length?(0,s.jsx)("div",{className:"text-sm muted",children:"No payment methods available"}):M.map(e=>(0,s.jsx)(h.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(j.$,{variant:"outline",className:"h-14 w-20 surface-sub hover:opacity-90 rounded-2xl shadow-sm flex items-center justify-center",onClick:()=>em(e.code),children:(0,s.jsx)("img",{src:(0,et.$)(e.code),alt:e.name,width:40,height:20,className:"object-contain"})})},e.code))})]},"payment-methods")})]}),(0,s.jsx)(g.N,{children:q&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"p-4 divider surface-sub",children:eg?(0,s.jsx)(j.$,{onClick:ec,disabled:v||!(()=>{switch(eg.code){case"visa":case"mastercard":return G.cardNumber&&G.expiryDate&&G.cvv&&G.cardholderName;case"paypal":return G.email;case"apple_pay":case"google_pay":case"cod":return!0;default:return!1}})(),className:"w-full bg-gradient-to-r from-paydine-champagne to-paydine-rose-beige hover:from-paydine-champagne/90 hover:to-paydine-rose-beige/90 text-paydine-elegant-gray font-bold py-3 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",children:v?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-4 w-4"}),(()=>{switch(eg.code){case"visa":case"mastercard":return"Pay ".concat(r(eo));case"paypal":return"Pay with PayPal";case"apple_pay":case"google_pay":return"Pay with ".concat(eg.name);case"cod":return"Confirm Cash Payment";default:return"Pay"}})()]})}):null})})]})}):null}function el(e){let{item:a,onSelect:t,onFirstAdd:i}=e,n=(0,m.x)(e=>e.addToCart),{items:l}=(0,m.x)(),{t:o}=(0,c.n)(),d=l.find(e=>e.item.id===a.id),u=(null==d?void 0:d.quantity)||0,x=a.nameKey&&o(a.nameKey)?o(a.nameKey):a.name,h=a.descriptionKey&&o(a.descriptionKey)?o(a.descriptionKey):a.description;return(0,s.jsxs)("div",{className:"flex items-center space-x-4 group cursor-pointer",onClick:()=>t(a),children:[(0,s.jsx)("div",{className:"relative w-28 h-28 md:w-36 md:h-36 flex-shrink-0",children:(0,s.jsx)(p.p,{src:a.image||"/placeholder.svg",alt:x,fill:!0,className:"object-contain transition-transform duration-700 ease-in-out group-hover:scale-110"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-paydine-elegant-gray",children:x}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:h}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-paydine-rose-beige",children:r(a.price||0)}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{className:"quantity-btn w-12 h-12 font-bold text-lg",onClick:e=>{e.stopPropagation(),n(a),0===u&&i()},children:[u>0?(0,s.jsx)("span",{className:"text-lg font-bold",children:u}):(0,s.jsx)(f.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Add to cart"})]}),u>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 text-base font-bold",style:{color:"var(--theme-secondary)"},children:"+"})]})]})]})]})}function er(e){let{toolbarState:a,setToolbarState:t,showBillArrow:i,items:n,totalPrice:o,t:c,onCartClick:d,onWaiterClick:m,onNoteClick:u,waiterDisabled:x=!1,noteDisabled:y=!1,totalItems:f,themeBackgroundColor:b}=e,j=76;return"preview"===a&&(j=180),"expanded"===a&&(j=420),(0,l.useEffect)(()=>{let e=()=>{let e=document.querySelector(".toolbar-inner-fixed")||document.querySelector('div[class*="backdrop-blur-lg"][class*="rounded-[2.5rem]"]');if(e){let a=document.documentElement.getAttribute("data-theme")||"clean-light",t={"clean-light":"rgba(250, 250, 250, 0.95)","modern-dark":"rgba(10, 14, 18, 0.95)","gold-luxury":"rgba(15, 11, 5, 0.95)","vibrant-colors":"rgba(226, 206, 177, 0.95)",minimal:"rgba(207, 235, 247, 0.95)"},s=t[a]||t["clean-light"];e.style.background=s,e.style.backgroundColor=s,e.style.opacity="0.95",e.id="toolbar-inner-fixed"}};e();let a=new MutationObserver(a=>{a.forEach(a=>{"attributes"===a.type&&"data-theme"===a.attributeName&&setTimeout(e,100)})});return a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{a.disconnect()}},[]),(0,s.jsx)(h.P.div,{className:"fixed bottom-[1.35rem] left-1/2 -translate-x-1/2 w-full max-w-[23.04rem] z-40 px-2",animate:"expanded"===a?{height:"auto"}:{height:j},transition:{type:"spring",stiffness:300,damping:30},style:{pointerEvents:"auto"},children:(0,s.jsxs)("div",{className:" relative flex flex-col w-full h-full backdrop-blur-lg rounded-[2.5rem] shadow-2xl border border-white/30 ring-1 ring-paydine-champagne/10 ",style:{minHeight:76,height:"100%",background:"var(--theme-background)",backgroundColor:"var(--theme-background)",opacity:.95},children:[i&&(0,s.jsx)("button",{className:"absolute left-1/2 -top-4 z-10 flex items-center justify-center w-10 h-10 rounded-full bg-white/90 shadow border border-paydine-champagne/30 transition-all",style:{transform:"translateX(-50%)"},onClick:()=>t("expanded"===a?"preview":"expanded"),"aria-label":"expanded"===a?"Hide bill":"Show bill",children:"expanded"===a?(0,s.jsx)(K.A,{className:"w-5 h-5 text-paydine-champagne"}):(0,s.jsx)(Y.A,{className:"w-5 h-5 text-paydine-champagne"})}),(0,s.jsx)(g.N,{mode:"popLayout",children:("preview"===a||"expanded"===a)&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"w-full px-6 pt-8 pb-2 scrollbar-hide",style:{maxHeight:"expanded"===a?320:90,overflowY:"expanded"===a?"auto":"visible",height:"expanded"===a?"auto":void 0,msOverflowStyle:"none",scrollbarWidth:"none"},children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(g.N,{mode:"popLayout",children:n.slice("preview"===a?-1:0).map(e=>(0,s.jsxs)(h.P.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.25}},exit:{opacity:0,scale:.95,transition:{duration:.18}},className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(h.P.div,{className:"relative w-12 h-12",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},children:(0,s.jsx)(p.p,{src:e.item.image||"/placeholder.svg",alt:e.item.name,fill:!0,className:"rounded-xl object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.P.div,{className:"font-medium text-paydine-elegant-gray text-base",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},children:e.item.name}),(0,s.jsxs)(h.P.div,{className:"text-sm text-gray-500",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},children:[r(e.item.price||0)," \xd7 ",e.quantity]})]})]}),(0,s.jsx)(h.P.div,{className:"font-semibold text-paydine-rose-beige text-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:r((e.item.price||0)*e.quantity)})]},e.item.id))})}),"expanded"===a&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 pt-4 border-t border-paydine-champagne/30 bg-paydine-rose-beige/10 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(h.P.span,{className:"font-bold text-paydine-elegant-gray text-lg",initial:{x:-10,opacity:0},animate:{x:0,opacity:1},children:"Total"}),(0,s.jsx)(h.P.span,{className:"font-bold text-2xl text-paydine-champagne",initial:{x:10,opacity:0},animate:{x:0,opacity:1},children:r(o)})]})})]})},"bill")}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-8 px-8 py-4",style:{minHeight:76,borderBottomLeftRadius:"2.5rem",borderBottomRightRadius:"2.5rem",background:"transparent",marginTop:"auto"},children:[(0,s.jsx)(h.P.button,{whileTap:{scale:x?1:.92},whileHover:{scale:x?1:1.12},className:"flex items-center justify-center focus:outline-none transition-all ".concat(x?"opacity-50 cursor-not-allowed":""),style:{background:"none",border:"none",padding:0,margin:0},onClick:x?void 0:m,disabled:x,"aria-label":c("callWaiter"),children:(0,s.jsx)(G.A,{className:"h-8 w-8 ".concat(x?"text-gray-400":"text-paydine-elegant-gray")})}),(0,s.jsx)(h.P.button,{whileTap:{scale:y?1:.92},whileHover:{scale:y?1:1.12},className:"flex items-center justify-center focus:outline-none transition-all ".concat(y?"opacity-50 cursor-not-allowed":""),style:{background:"none",border:"none",padding:0,margin:0},onClick:y?void 0:u,disabled:y,"aria-label":c("leaveNote"),children:(0,s.jsx)(X.A,{className:"h-8 w-8 ".concat(y?"text-gray-400":"text-paydine-elegant-gray")})}),(0,s.jsxs)(h.P.button,{whileTap:{scale:.92},whileHover:{scale:1.12},className:"flex items-center justify-center relative focus:outline-none transition-all",style:{background:"none",border:"none",padding:0,margin:0},onClick:d,"aria-label":c("viewCart"),children:[(0,s.jsx)(Z.A,{className:"h-8 w-8 text-paydine-elegant-gray"}),f>0&&(0,s.jsx)("span",{className:"cart-badge absolute -top-2 -right-2 font-bold rounded-full h-7 w-7 flex items-center justify-center shadow-md",style:{fontSize:"12px"},children:f})]})]})]})})}function eo(){return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-paydine-champagne border-t-transparent rounded-full animate-spin"})})}let ec=e=>{let{isOpen:a,onOpenChange:t,tableId:i,tableName:n}=e,{t:r}=(0,c.n)(),{toast:o}=(0,O.dj)(),[d,m]=(0,l.useState)("confirming"),[u,x]=(0,l.useState)(!1),p=async()=>{if(!i){o({title:"Error",description:"Missing table_id",variant:"destructive"});return}console.debug("[waiter-call] payload",{tableId:i,msg:"."});try{await ea.u.callWaiter(String(i),"."),o({title:"Waiter Called",description:"We are on the way!"})}catch(e){throw o({title:"Error",description:(null==e?void 0:e.message)||"Failed to call waiter",variant:"destructive"}),e}m("confirmed"),x(!0),await new Promise(e=>setTimeout(e,800)),await new Promise(e=>setTimeout(e,2e3)),x(!1),await new Promise(e=>setTimeout(e,300)),t(!1),m("confirming")},y=async()=>{m("closing"),await new Promise(e=>setTimeout(e,300)),t(!1),m("confirming")};return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsx)(h.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:"closing"===d?.95:1,opacity:+("closing"!==d),y:20*("closing"===d)},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden",children:(0,s.jsx)(g.N,{mode:"wait",children:u?(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(Q.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:r("waiterComing")})]},"success"):(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 hover:bg-paydine-champagne rounded-full flex items-center justify-center mb-4 transition-all duration-300",children:(0,s.jsx)(G.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:r("callWaiter")}),(0,s.jsx)("p",{className:"text-paydine-elegant-gray/80",children:r("callWaiterConfirm")})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"flex-1 py-3 px-6 rounded-xl bg-gray-100 text-paydine-elegant-gray font-medium hover:bg-gray-200 transition-colors",children:r("no")}),(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex-1 py-3 px-6 rounded-xl bg-paydine-rose-beige/50 hover:bg-paydine-champagne text-paydine-elegant-gray font-medium transition-all duration-300",children:r("yes")})]})]},"confirm")})})})})},ed=e=>{let{isOpen:a,onOpenChange:t,note:i,setNote:n,onSend:r,tableId:o,tableName:d}=e,{t:m}=(0,c.n)(),[u,x]=(0,l.useState)("editing"),[p,y]=(0,l.useState)(!1),f=async()=>{i.trim()&&(x("confirmed"),y(!0),await new Promise(e=>setTimeout(e,800)),await new Promise(e=>setTimeout(e,2e3)),y(!1),await new Promise(e=>setTimeout(e,300)),r(),t(!1),x("editing"))},b=async()=>{x("closing"),await new Promise(e=>setTimeout(e,300)),t(!1),x("editing")};return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsx)(h.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:"closing"===u?.95:1,opacity:+("closing"!==u),y:20*("closing"===u)},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden",children:(0,s.jsx)(g.N,{mode:"wait",children:p?(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(Q.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:m("messageReceived")})]},"success"):(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 hover:bg-paydine-champagne rounded-full flex items-center justify-center mb-4 transition-all duration-300",children:(0,s.jsx)(X.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:m("leaveNoteTitle")}),(0,s.jsx)("p",{className:"text-paydine-elegant-gray/80",children:m("leaveNoteDesc")})]}),(0,s.jsx)(ee.T,{placeholder:m("notePlaceholder"),value:i,onChange:e=>n(e.target.value),className:"bg-white border-paydine-champagne/30 rounded-xl min-h-[100px] w-full mb-4"}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,className:"flex-1 py-3 px-6 rounded-xl bg-gray-100 text-paydine-elegant-gray font-medium hover:bg-gray-200 transition-colors",children:m("cancel")}),(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"flex-1 py-3 px-6 rounded-xl bg-paydine-rose-beige/50 hover:bg-paydine-champagne text-paydine-elegant-gray font-medium transition-all duration-300",children:m("sendNote")})]})]},"edit")})})})})};function em(){var e,a,t,i,r,u,p,h,g;let[y,f]=(0,l.useState)(!1),[b,j]=(0,l.useState)(0),[v,N]=(0,l.useState)("All"),[w,k]=(0,l.useState)(null),[S,C]=(0,l.useState)("collapsed"),[P,A]=(0,l.useState)(null),[_,E]=(0,l.useState)(!1),[T,F]=(0,l.useState)(!0),[D,M]=(0,l.useState)([]),[L,R]=(0,l.useState)([]),{menuItems:K}=(0,d.W)();console.info("MENU PAGE ACTIVE FILE ✅"),console.log("data-theme:",document.documentElement.getAttribute("data-theme")),console.log("--theme-background:",getComputedStyle(document.documentElement).getPropertyValue("--theme-background")),console.log("body bg:",getComputedStyle(document.body).background);let{items:H,toggleCart:V,addToCart:W,setTableInfo:U}=(0,m.x)(),B=function(){let[e,a]=(0,l.useState)("#FAFAFA"),[t,s]=(0,l.useState)("clean-light");return(0,l.useEffect)(()=>{let e=()=>{let e=document.documentElement.getAttribute("data-theme")||"clean-light",t=getComputedStyle(document.documentElement).getPropertyValue("--theme-background").trim();"clean-light"===e?a("#000000"):"minimal"===e?a("#CFEBF7"):a(t||"#FAFAFA"),s(e)};e();let t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()},[]),e}(),{t:J}=(0,c.n)(),{toast:Y}=(0,O.dj)(),[G,X]=(0,l.useState)(!1),[Z,Q]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(""),[es,ei]=(0,l.useState)(null),em=(0,z.useSearchParams)(),eu=null!==(a=null==em?void 0:em.get("table_no"))&&void 0!==a?a:null,ex=null!==(t=null==em?void 0:em.get("table_id"))&&void 0!==t?t:null;null==em||em.get("qr");let ep=null!==(u=null!==(r=null==es?void 0:es.table_no)&&void 0!==r?r:eu)&&void 0!==u?u:null,eh=null!==(h=null!==(p=null==es?void 0:es.table_id)&&void 0!==p?p:ex)&&void 0!==h?h:null;0===ep||null==es||null===(e=es.table_name)||void 0===e||e.toLowerCase();let eg=String(null!=eh?eh:"").trim(),ey=null!==(g=null==es?void 0:es.table_name)&&void 0!==g?g:void 0;(0,l.useEffect)(()=>{N("All")},[]),(0,l.useEffect)(()=>{D.length>0&&N("All")},[D]),(0,l.useEffect)(()=>{(async function(){try{F(!0),console.log("Loading menu data...");let e=em.get("table_id"),a=em.get("table_no"),t=em.get("qr"),s=a||e;if(s)try{let e=await ea.u.getTableInfo(s,t||void 0,!!a);e.success&&(ei(e.data),U({table_id:e.data.table_id,table_name:e.data.table_name,location_id:e.data.location_id,qr_code:e.data.qr_code}))}catch(e){console.error("Failed to fetch table info:",e)}let i=await (0,o.Gq)();M(i.menuItems),R(i.categoryNames)}catch(e){console.error("Failed to load menu data:",e),M(o.K$),R(o.LZ),N("All")}finally{F(!1)}})()},[em,U]);let ef=(0,l.useMemo)(()=>["All",...L.length>0?L:["Appetizer","Mains","Desserts","Drinks"]],[L]),eb=(0,l.useMemo)(()=>{let e=D.length?D:K.length?K:o.K$,a=v||"All";return"All"===a?e:e.filter(e=>e.category===a)},[D,K,v]);(0,l.useEffect)(()=>{D.length>0&&!v&&N("All")},[D,v]);let ej=H.reduce((e,a)=>e+a.quantity,0),ev=H.reduce((e,a)=>e+(a.item.price||0)*a.quantity,0),eN=e=>{"collapsed"===S&&C("preview");let a=H.find(a=>a.item.id===e.id);a&&A(a)},ew=e=>{k(e);let a=H.find(a=>a.item.id===e.id);a&&A(a)},ek=async()=>{if(!eg){Y({title:"Error",description:"Missing table_id",variant:"destructive"});return}let e=(null!=ee?ee:"").trim();if(!e){Y({title:"Error",description:"Please enter a note before sending.",variant:"destructive"});return}if(e.length>1e3){Y({title:"Error",description:"Note is too long. Please keep it under 1000 characters.",variant:"destructive"});return}console.debug("[table-note] payload",{tableId:eg,note:e});try{await ea.u.callTableNote(String(eg),e,new Date().toISOString()),et(""),X(!1),Y({title:"Note Sent",description:"Your note has been sent to the staff!"})}catch(e){console.error("Failed to send note:",e),Y({title:"Note Failed",description:"Failed to send note: ".concat(e instanceof Error?e.message:"Unknown error"),variant:"destructive"})}};return((0,l.useEffect)(()=>{f(!0)},[]),y)?(0,s.jsxs)("div",{className:"jsx-2b8365bf2703af0e relative min-h-screen w-full bg-theme-background pb-32",children:[(0,s.jsx)("header",{className:"jsx-2b8365bf2703af0e py-8",children:(0,s.jsx)("div",{className:"jsx-2b8365bf2703af0e max-w-4xl mx-auto px-4",children:(0,s.jsx)(x.g,{tableNumber:null==es?void 0:es.table_name})})}),(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(eo,{}),children:(0,s.jsxs)("main",{className:"jsx-2b8365bf2703af0e max-w-4xl mx-auto",children:[(0,s.jsx)(q,{categories:ef,selectedCategory:v||"All",onSelectCategory:e=>{N(e),e||N("All")}}),(0,s.jsx)("section",{className:"jsx-2b8365bf2703af0e w-full mb-12",children:(0,s.jsx)("div",{className:"jsx-2b8365bf2703af0e grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-8 px-4",children:eb.map(e=>(0,s.jsx)(el,{item:e,onSelect:ew,onFirstAdd:()=>eN(e)},e.id))})})]})}),(0,s.jsx)(n(),{id:"2b8365bf2703af0e",children:"@-webkit-keyframes btn-bounce{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes btn-bounce{0%{-moz-transform:scale(1);transform:scale(1)}40%{-moz-transform:scale(1.2);transform:scale(1.2)}100%{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes btn-bounce{0%{-o-transform:scale(1);transform:scale(1)}40%{-o-transform:scale(1.2);transform:scale(1.2)}100%{-o-transform:scale(1);transform:scale(1)}}@keyframes btn-bounce{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-o-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.btn-animate{-webkit-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);-moz-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);-o-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);animation:btn-bounce.7s cubic-bezier(.4,2,.6,1)}.btn-glow{-webkit-box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3);-moz-box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3);box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3)}"}),(0,s.jsx)(er,{toolbarState:S,setToolbarState:C,showBillArrow:ej>0&&"collapsed"!==S,items:"preview"===S&&P?[P]:H,totalPrice:ev,t:J,onCartClick:()=>{H.length>0&&E(!0)},onWaiterClick:eg?()=>Q(!0):void 0,onNoteClick:eg?()=>X(!0):void 0,waiterDisabled:!eg,noteDisabled:!eg,totalItems:ej,themeBackgroundColor:B}),(0,s.jsx)(I,{}),(0,s.jsx)($,{item:w,onClose:()=>k(null)}),(0,s.jsx)(en,{isOpen:_,onClose:()=>E(!1),items:H,tableInfo:es}),(0,s.jsx)(ec,{isOpen:Z,onOpenChange:Q,tableId:eg,tableName:ey}),(0,s.jsx)(ed,{isOpen:G,onOpenChange:X,note:ee,setNote:et,onSend:ek,tableId:eg,tableName:ey})]}):(0,s.jsx)(eo,{})}function eu(){return(0,l.useEffect)(()=>{{let e=localStorage.getItem("paymydine-theme")||"clean-light";(0,u.applyTheme)(e);let a={"clean-light":"#FAFAFA","modern-dark":"#0A0E12","gold-luxury":"#0F0B05","vibrant-colors":"#e2ceb1",minimal:"#CFEBF7"}[e]||"#FAFAFA";document.body.style.background=a,document.documentElement.style.background=a;let t=document.querySelector(".page--menu .min-h-screen");t&&(t.style.background=a),console.info("MENU PAGE THEME SAFETY NET APPLIED"),console.log("Applied theme:",e),console.log("Forced background color:",a),console.log("--theme-background:",getComputedStyle(document.documentElement).getPropertyValue("--theme-background")),console.log("body background:",getComputedStyle(document.body).background)}},[]),(0,s.jsx)("div",{className:"page--menu",children:(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(em,{})})})}},99474:(e,a,t)=>{"use strict";t.d(a,{T:()=>l});var s=t(95155),i=t(12115),n=t(53999);let l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});l.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[9352,6874,8009,3463,6766,4150,8808,98,292,1725,8441,1684,7358],()=>a(68367)),_N_E=e.O()}]);