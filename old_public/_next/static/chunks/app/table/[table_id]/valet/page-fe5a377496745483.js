(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4615],{14503:(e,t,a)=>{"use strict";a.d(t,{dj:()=>p});var s=a(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},33864:(e,t,a)=>{Promise.resolve().then(a.bind(a,41038))},35169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},40968:(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var s=a(12115),r=a(63655),i=a(95155),n=s.forwardRef((e,t)=>(0,i.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n},41038:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95155),r=a(12115),i=a(35695),n=a(21802),l=a(78525),o=a(24446),d=a(91725),c=a(2193),u=a(97168),p=a(57930),m=a(43453),h=a(89852),f=a(82714),y=a(43463),x=a(60760),g=a(30098),b=a(14503);function v(){let{table_id:e}=(0,i.useParams)(),{toast:t}=(0,b.dj)(),a=new g.O,{t:v}=(0,n.n)(),{settings:j}=(0,l.W)(),{tableInfo:N}=(0,o.x)(),[w,S]=(0,r.useState)(!1),[P,_]=(0,r.useState)(!1),[A,E]=(0,r.useState)(""),[k,T]=(0,r.useState)(""),[M,R]=(0,r.useState)(""),C=async s=>{if(s.preventDefault(),!e){t({title:"Missing table",description:"Open valet from a table link.",variant:"destructive"});return}S(!0);try{await a.createValetRequest({table_id:String(e),name:A.trim(),license_plate:k.trim(),car_make:M.trim()||void 0}),t({title:"Valet requested",description:"We'll be right with you."}),E(""),T(""),R(""),_(!0)}catch(e){var r;console.error("[valet] submit failed",e),t({title:"Valet request failed",description:null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"Please try again.",variant:"destructive"})}finally{S(!1)}};return(0,s.jsx)("div",{className:"min-h-screen p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsx)(y.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)(d.g,{className:"mb-8"})}),(0,s.jsx)(x.N,{mode:"wait",children:P?(0,s.jsxs)(y.P.div,{className:"bg-white rounded-2xl shadow-sm border border-paydine-border p-6 sm:p-8 text-center",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,s.jsx)(y.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.6,delay:.1},className:"mx-auto w-16 h-16 rounded-full bg-paydine-champagne/10 flex items-center justify-center mb-6",children:(0,s.jsx)(m.A,{className:"w-8 h-8 text-paydine-champagne"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-4",children:v("valetRequestSuccess")}),(0,s.jsx)("p",{className:"text-paydine-muted-gray mb-8",children:v("valetConfirmation")}),(0,s.jsx)(u.$,{className:"bg-paydine-champagne hover:bg-paydine-rose-beige text-paydine-elegant-gray transition-colors",size:"lg",onClick:()=>router.push((0,c.h)({pathParam:e,tableInfo:N})),children:v("backToHome")})]},"success"):(0,s.jsxs)(y.P.div,{className:"bg-white rounded-2xl shadow-sm border border-paydine-border p-4 sm:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(p.A,{className:"h-6 w-6 text-paydine-champagne mr-3"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-paydine-elegant-gray",children:v("valetService")})]}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,s.jsxs)(y.P.div,{className:"space-y-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.3},children:[(0,s.jsxs)(f.J,{htmlFor:"name",className:"text-paydine-elegant-gray",children:[v("enter_your_name")," *"]}),(0,s.jsx)(h.p,{id:"name",value:A,onChange:e=>E(e.target.value),placeholder:v("enter_your_name"),className:"border-paydine-border focus:border-paydine-champagne focus:ring-paydine-champagne",required:!0})]}),(0,s.jsxs)(y.P.div,{className:"space-y-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.4},children:[(0,s.jsxs)(f.J,{htmlFor:"plate",className:"text-paydine-elegant-gray",children:[v("license_plate")," *"]}),(0,s.jsx)(h.p,{id:"plate",value:k,onChange:e=>T(e.target.value),placeholder:v("license_plate"),className:"border-paydine-border focus:border-paydine-champagne focus:ring-paydine-champagne",required:!0})]}),(0,s.jsxs)(y.P.div,{className:"space-y-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.5},children:[(0,s.jsxs)(f.J,{htmlFor:"carMake",className:"text-paydine-elegant-gray flex items-center",children:[v("car_make")," ",(0,s.jsxs)("span",{className:"text-gray-400",children:["(",v("optional"),")"]})]}),(0,s.jsx)(h.p,{id:"carMake",value:M,onChange:e=>R(e.target.value),placeholder:v("car_make_placeholder"),className:"border-paydine-border focus:border-paydine-champagne focus:ring-paydine-champagne"})]}),(0,s.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:(0,s.jsx)(u.$,{className:"w-full bg-paydine-champagne hover:bg-paydine-rose-beige text-paydine-elegant-gray transition-colors",size:"lg",type:"submit",disabled:w||!e,children:v(w?"submitting":"requestValet")})})]})]},"form")}),(0,s.jsxs)(y.P.div,{className:"mt-4 text-sm text-paydine-muted-gray bg-white rounded-xl p-4 border border-paydine-border",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},children:[(0,s.jsx)("p",{className:"mb-2",children:v("valetAvailability")}),(0,s.jsx)("p",{children:v("valetTicket")})]})]})})}},43453:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},57930:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},60760:(e,t,a)=>{"use strict";a.d(t,{N:()=>g});var s=a(95155),r=a(12115),i=a(90869),n=a(82885),l=a(97494),o=a(80845),d=a(27351),c=a(51508);class u extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,a=(0,d.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p(e){let{children:t,isPresent:a,anchorX:i,root:n}=e,l=(0,r.useId)(),o=(0,r.useRef)(null),d=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=(0,r.useContext)(c.Q);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:r,right:c}=d.current;if(a||!o.current||!e||!t)return;o.current.dataset.motionPopId=l;let u=document.createElement("style");p&&(u.nonce=p);let m=null!=n?n:document.head;return m.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(r):"right: ".concat(c),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{m.contains(u)&&m.removeChild(u)}},[a]),(0,s.jsx)(u,{isPresent:a,childRef:o,sizeRef:d,children:r.cloneElement(t,{ref:o})})}let m=e=>{let{children:t,initial:a,isPresent:i,onExitComplete:l,custom:d,presenceAffectsLayout:c,mode:u,anchorX:m,root:f}=e,y=(0,n.M)(h),x=(0,r.useId)(),g=!0,b=(0,r.useMemo)(()=>(g=!1,{id:x,initial:a,isPresent:i,custom:d,onExitComplete:e=>{for(let t of(y.set(e,!0),y.values()))if(!t)return;l&&l()},register:e=>(y.set(e,!1),()=>y.delete(e))}),[i,y,l]);return c&&g&&(b={...b}),(0,r.useMemo)(()=>{y.forEach((e,t)=>y.set(t,!1))},[i]),r.useEffect(()=>{i||y.size||!l||l()},[i]),"popLayout"===u&&(t=(0,s.jsx)(p,{isPresent:i,anchorX:m,root:f,children:t})),(0,s.jsx)(o.t.Provider,{value:b,children:t})};function h(){return new Map}var f=a(32082);let y=e=>e.key||"";function x(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let g=e=>{let{children:t,custom:a,initial:o=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:u="sync",propagate:p=!1,anchorX:h="left",root:g}=e,[b,v]=(0,f.xQ)(p),j=(0,r.useMemo)(()=>x(t),[t]),N=p&&!b?[]:j.map(y),w=(0,r.useRef)(!0),S=(0,r.useRef)(j),P=(0,n.M)(()=>new Map),[_,A]=(0,r.useState)(j),[E,k]=(0,r.useState)(j);(0,l.E)(()=>{w.current=!1,S.current=j;for(let e=0;e<E.length;e++){let t=y(E[e]);N.includes(t)?P.delete(t):!0!==P.get(t)&&P.set(t,!1)}},[E,N.length,N.join("-")]);let T=[];if(j!==_){let e=[...j];for(let t=0;t<E.length;t++){let a=E[t],s=y(a);N.includes(s)||(e.splice(t,0,a),T.push(a))}return"wait"===u&&T.length&&(e=T),k(x(e)),A(j),null}let{forceRender:M}=(0,r.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:E.map(e=>{let t=y(e),r=(!p||!!b)&&(j===E||N.includes(t));return(0,s.jsx)(m,{isPresent:r,initial:(!w.current||!!o)&&void 0,custom:a,presenceAffectsLayout:c,mode:u,root:g,onExitComplete:r?void 0:()=>{if(!P.has(t))return;P.set(t,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),k(S.current),p&&(null==v||v()),d&&d())},anchorX:h,children:e},t)})})}},63655:(e,t,a)=>{"use strict";a.d(t,{hO:()=>o,sG:()=>l});var s=a(12115),r=a(47650),i=a(99708),n=a(95155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=s.forwardRef((e,a)=>{let{asChild:s,...r}=e,l=s?i.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...r,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},82714:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(95155),r=a(12115),i=a(40968),n=a(74466),l=a(53999);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(o(),a),...r})});d.displayName=i.b.displayName},89852:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),i=a(53999);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,6874,8009,3463,6766,98,292,1725,8441,1684,7358],()=>t(33864)),_N_E=e.O()}]);